cmake_minimum_required(VERSION 2.8)

project(OrthancAccessRights)
 
# set(SAMPLES_ROOT ${CMAKE_SOURCE_DIR}/..)
# include(${SAMPLES_ROOT}/Common/OrthancPlugins.cmake)

set(ORTHANC_ROOT ${CMAKE_SOURCE_DIR}/../../..)

set(ORTHANC_FRAMEWORK_PLUGIN ON)
include(${ORTHANC_ROOT}/Resources/CMake/OrthancFrameworkParameters.cmake)

include(${ORTHANC_ROOT}/Resources/CMake/OrthancFrameworkConfiguration.cmake)
include_directories(${ORTHANC_ROOT})

add_definitions(
  -DORTHANC_ENABLE_LOGGING_PLUGIN=1
  -DHAS_ORTHANC_EXCEPTION=1
  )

EmbedResources(
  ORTHANC_EXPLORER ${CMAKE_SOURCE_DIR}/Resources/OrthancExplorer.js
  PRIVILEDGE_ADMINISTRATION ${CMAKE_SOURCE_DIR}/Resources/PriviledgeAdministration.html
  ${EMBEDDED_RESOURCES}
  )

add_library(OrthancAccessRights SHARED 
  Plugin.cpp 
   ${ORTHANC_CORE_SOURCES}
   ${AUTOGENERATED_SOURCES}
)

target_link_libraries(OrthancAccessRights)

install(
  TARGETS OrthancAccessRights
  RUNTIME DESTINATION lib    # Destination for Windows
  LIBRARY DESTINATION share/orthanc/plugins    # Destination for Linux
  )













